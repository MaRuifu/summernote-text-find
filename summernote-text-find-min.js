(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof module&&module.exports?module.exports=a(require("jquery")):a(window.jQuery)})(function(a){a("<style>").html("\n  #findtxtToolbar {\n    padding: 5px; \n    background-color: var(--note-toolbar-background-color) !important; /* \u8bbe\u7f6e\u80cc\u666f\u989c\u8272 */\n  }\n  #findtxtToolbar .note-form-row {\n    position: relative; /* \u76f8\u5bf9\u5b9a\u4f4d */\n    display: flex; /* \u4f7f\u7528 flexbox \u5e03\u5c40 */\n    flex: 1 0 100%; /* flex \u5c5e\u6027\u7528\u4e8e\u54cd\u5e94\u5f0f\u5e03\u5c40 */\n    flex-wrap: nowrap;  /* \u4e0d\u6362\u884c */\n    vertical-align: middle; /* \u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50 */\n    padding: 0;  /* \u79fb\u9664\u5185\u8fb9\u8ddd */\n  }\n  .note-display-none { display: none !important; } /* \u9690\u85cf\u5143\u7d20 */\n  .note-display-block { display: block !important; }  /* \u663e\u793a\u5143\u7d20 */\n  .selectHighlight{background: red; } /* \u9009\u4e2d\u9ad8\u4eae\u80cc\u666f */\n  .highlight { background-color: yellow ; }  /* \u9ad8\u4eae\u6587\u672c\u80cc\u666f */\n  #findtxtToolbar .searchText,\n  #findtxtToolbar .note-input {\n       width: 250px;  /* \u8bbe\u7f6e\u8f93\u5165\u6846\u5bbd\u5ea6 */\n  }\n\n  .centered-content {\n    padding-left: 10px; /* \u6dfb\u52a0\u5de6\u4fa7\u5185\u8fb9\u8ddd */\n    text-align: center; /* \u6c34\u5e73\u5c45\u4e2d\u6587\u672c */\n    display: flex; /* \u4f7f\u7528Flexbox */\n    align-items: center; /* \u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50 */\n    justify-content: center; /* \u6c34\u5e73\u5c45\u4e2d\u5bf9\u9f50 */\n   }\n").appendTo("head");
a.extend(!0,a.summernote.lang,{"en-US":{findtxt:{tooltip:"Find",findBtn:"Find",findPlaceholder:"Enter the text you want to find...",previous:"Previous",next:"Next"}}});a.extend(a.summernote.options,{findtxt:{classHidden:"note-display-none",icon:'<i class="note-icon" data-toggle="findtxt"><svg t="1728893612827" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17499" width="14" height="14"><path d="M474.453333 884.053333c-225.28 0-409.6-184.32-409.6-409.6s184.32-409.6 409.6-409.6 409.6 184.32 409.6 409.6-184.32 409.6-409.6 409.6z m0-68.266666c187.733333 0 341.333333-153.6 341.333334-341.333334s-153.6-341.333333-341.333334-341.333333-341.333333 153.6-341.333333 341.333333 153.6 341.333333 341.333333 341.333334z m252.586667 54.613333c-13.653333-13.653333-10.24-37.546667 3.413333-47.786667s37.546667-10.24 47.786667 3.413334l64.853333 78.506666c13.653333 13.653333 10.24 37.546667-3.413333 47.786667s-37.546667 10.24-47.786667-3.413333l-64.853333-78.506667z" fill="#2c2c2c" p-id="17500" transform="translate(0, 200)scale(0.9)" ></path></svg></i>'}});
a.extend(a.summernote.plugins,{findtxt:function(g){var y=a.summernote.ui,r=g.layoutInfo.note,t=g.layoutInfo.editor,m=g.options,n=m.langInfo;g.memo("button.findtxt",function(){return y.button({contents:m.findtxt.icon,container:m.container,tooltip:n.findtxt.tooltip,placement:m.placement,click:function(f){f.preventDefault();t.find(".highlight").contents().unwrap("mark");a("#findtxtToolbar").toggleClass(m.findtxt.classHidden);a(".note-status-output").text("");r.summernote("createRange").toString()&&(f=
r.summernote("createRange").toString(),a("#searchText").val(f))}}).render()});this.initialize=function(){a(document).on("keydown",function(d){(d.ctrlKey||d.metaKey)&&"f"===d.key?(d.preventDefault(),g.invoke("findtxt.toggleToolbar")):d.metaKey&&"ArrowLeft"===d.key?(d.preventDefault(),g.invoke("findtxt.previous")):d.metaKey&&"ArrowRight"===d.key&&(d.preventDefault(),g.invoke("findtxt.next"))});var f='<div id="findtxtToolbar" class="note-display-none"><div class="note-form-row"><input id="searchText" type="text" class="searchText note-input" value="" placeholder="'+
n.findtxt.findPlaceholder+'"><button class="searchText-btn  btn btn-default note-btn ">'+n.findtxt.findBtn+'</button><button class="noScrollToNextMatch btn btn-default note-btn" id="noNextButton" " style="display:none;">'+n.findtxt.previous+'</button><button class="scrollToNextMatch btn btn-default note-btn" id="nextButton"  style="display:none;">'+n.findtxt.next+'</button><div class="centered-content"><progress  style="height: 30px;" id="progressBar" value="0"></progress><span id="selectMatches"></span><span id="totalMatches"></span></div></div></div>';
a(".note-toolbar").append(f);this.show()};this.toggleToolbar=function(){var f=g.layoutInfo.note;g.layoutInfo.editor.find(".highlight").contents().unwrap("mark");a("#findtxtToolbar").toggleClass(g.options.findtxt.classHidden);a(".note-status-output").text("");f.summernote("createRange").toString()&&(f=f.summernote("createRange").toString(),a("#searchText").val(f),a(".searchText-btn").click())};this.previous=function(){a("#noNextButton").click()};this.next=function(){a("#nextButton").click()};this.findtxt=
function(){function f(b){Array.from(b.childNodes).forEach(e=>{if(e.nodeType===Node.TEXT_NODE&&e.textContent.trim()){var p=new RegExp(u,"gi"),k=e.textContent.match(p);p=e.textContent.replace(p,'<mark class="highlight">$&</mark>');null!==k&&0<k.length&&(h+=k.length,k=document.createElement("span"),k.innerHTML=p,e.parentNode.replaceChild(k,e))}else e.nodeType===Node.ELEMENT_NODE&&f(e,h)});return h}function d(){l.text().substr(0,l.text().length-1)===v.text()?(a("#nextButton").attr("disabled","disabled"),
a("#noNextButton").removeAttr("disabled")):1===l.text().substr(0,l.text().length-1)?(a("#noNextButton").attr("disabled","disabled"),a("#nextButton").removeAttr("disabled")):1==v.text()?(a("#nextButton").attr("disabled","disabled"),a("#noNextButton").attr("disabled","disabled")):(a("#nextButton").removeAttr("disabled"),a("#noNextButton").removeAttr("disabled"))}var l=a("#selectMatches"),v=a("#totalMatches"),q=a("#progressBar"),w=a("#nextButton"),x=a("#noNextButton"),z=a(".noScrollToNextMatch"),A=a(".scrollToNextMatch");
let c=0,h=0;var u="";a(".searchText-btn").click(function(b){b.preventDefault();t.find(".highlight").contents().unwrap("mark");t.find(".selectHighlight").contents().unwrap("mark");h=0;u=a(".searchText").val();b=g.invoke("code");u&&(b=(new DOMParser).parseFromString(b,"text/html"),f(b),r.summernote("code",b.body.innerHTML),v.text(h),1<=h?(1<h&&(w.show(),x.show()),l.text("1/"),a("mark").eq(0).removeAttr("class"),a("mark").eq(0).addClass("selectHighlight"),a("mark")[0].scrollIntoView({behavior:"smooth",
block:"center"})):(w.hide(),x.hide(),a("mark").each(function(){a(this).removeAttr("class")}),l.text("")),c=0,q.value=0,q.max=h-1,d())});A.click(function(b){b.preventDefault();b=document.getElementById("selectMatches");if(c<h-1){c++;c<=h-1&&(q.value=c,document.querySelectorAll(".highlight")[c-1].scrollIntoView({behavior:"smooth",block:"center"}));b.innerHTML=c+1+"/";b=a("mark");let e=b.eq(c-1);e.removeAttr("class");e.addClass("highlight");b=b.eq(c);b.removeAttr("class");b.addClass("selectHighlight")}d()});
z.click(function(b){b.preventDefault();b=document.getElementById("selectMatches");if(0<c){c--;q.value=c;document.querySelectorAll(".highlight")[c].scrollIntoView({behavior:"smooth",block:"center"});b.innerHTML=c+1+"/";b=a("mark");let e=b.eq(c+1);e.removeAttr("class");e.addClass("highlight");b=b.eq(c);b.removeAttr("class");b.addClass("selectHighlight")}d()})};this.show=function(){this.findtxt()}}})});
